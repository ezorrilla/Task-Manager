<div class="pagina-tareas">
  <mat-toolbar color="primary" class="barra-navegacion">
    <mat-icon aria-hidden="true">task_alt</mat-icon>
    <span class="titulo-app">Task Manager</span>

    <span class="espaciador"></span>

    <span class="nombre-usuario" aria-label="Usuario actual">{{ nombreUsuario() }}</span>

    <button
      mat-icon-button
      (click)="cerrarSesion()"
      matTooltip="Cerrar sesion"
      aria-label="Cerrar sesion">
      <mat-icon>logout</mat-icon>
    </button>
  </mat-toolbar>

  <main class="contenido-principal">
    <div class="container">
      <h1 class="titulo-pagina">Mis Tareas</h1>

      <app-formulario-tarea (tareaCreada)="agregarTarea($event)" />

      @if (cargando()) {
        <app-cargando mensaje="Cargando tareas..." />
      } @else {
        @if (tareas().length === 0) {
          <div class="sin-tareas" role="status">
            <mat-icon aria-hidden="true">inbox</mat-icon>
            <p>No tienes tareas pendientes</p>
            <span>Agrega una nueva tarea usando el formulario de arriba</span>
          </div>
        } @else {
          <div class="lista-tareas" role="list" aria-label="Lista de tareas">
            @for (tarea of tareas(); track identificarTarea($index, tarea)) {
              <app-tarjeta-tarea
                [tarea]="tarea"
                (estadoCambiado)="cambiarEstado($event)"
                (editar)="editarTarea($event)"
                (eliminar)="confirmarEliminacion($event)"
                role="listitem" />
            }
          </div>
        }
      }
    </div>
  </main>
</div>
